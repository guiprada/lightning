var assert_counter = require("assert_counter.ltn")
var assert = assert_counter.assert
var assert_not = assert_counter.assert_not
// Testing Global Lock
var global_lock_test_counter = 5
{
    var n = 1000
    function many(index, collection)
    {
        global_lock_test_counter++;
    }
    rmap(n, [], many)
    assert(global_lock_test_counter, n + 5, "Failed Global Lock Test 1.")
}
{
    // Testing UpValue Lock
    var n = 1000
    var upvalue_lock_test_counter = 5
    function many(index, collection)
    {
        upvalue_lock_test_counter++;
    }
    rmap(n, [], many)
    assert(upvalue_lock_test_counter, n + 5, "Failed UpValue Lock Test 1.")
}
return assert_counter.get_error_counter()