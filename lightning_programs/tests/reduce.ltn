var assert_counter = require("assert_counter.ltn")
var assert = assert_counter.assert
var assert_not = assert_counter.assert_not

{
    // Testing reduce
    var n = 100
    var table1 = List(n)

    function many(index, collection, accumulator)
    {
		var this = collection[index] = []
        this.x = 1
		accumulator.value += this.x
    }

	var accumulator = [value:0];
    table1:list_reduce(many, accumulator)
    for (var i = 0; i<n; i++)
    {
        assert(table1[i].x, 1, "Failed reduce Test 1, iteration:" .. i .. ".")
    }
	assert(accumulator.value, 100, "Failed reduce Test 2.")
}

return assert_counter.get_error_counter()